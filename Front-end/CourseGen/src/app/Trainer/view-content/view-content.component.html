<div class="admin-dashboard-container">
  <!-- <div class="top-nav">
    <div class="logo">
      <img src="assets/Word-logo.png" alt="Logo" class="logo-img" />
    </div>
    <div class="nav-right">
      <button class="profile-btn">
        <img src="assets/userIcon.png" alt="Profile" class="profile-img" />
      </button>
    </div>
  </div>

  <div class="body">
    <div class="sidebar" [class.collapsed]="isCollapsed">
      <button class="toggle-btn" (click)="toggleSidebar()">‚ò∞</button>
      <ul>
        <li>
          <i class="icon fa fa-home"></i>
          <span *ngIf="!isCollapsed" routerLink="/dashboard">Dashboard</span>
        </li>
        <li>
          <i class="icon fas fa-book"></i>
          <span *ngIf="!isCollapsed" routerLink="/generate-content">Generate Course</span>
        </li>
        <li>
          <i class="icon fas fa-file-alt"></i>
          <span *ngIf="!isCollapsed" routerLink="/view-content">View Content</span>
        </li>
        <hr class="divider" />
        <li>
          <i class="icon fas fa-sign-out-alt"></i>
          <span class="logout-link" *ngIf="!isCollapsed">Logout</span>
        </li>
      </ul>
    </div>

    <div class="sub-header" [class.shifted]="isCollapsed">
      <h3 class="sub-heading">VIEW CONTENT</h3>
      <button class="back-button" style="background-color: #133B50;" routerLink="/view-courses">
        <span class="icon"></span> Back
      </button>
    </div> -->

  <div class="dash-container-1" [class.shifted]="isCollapsed">
    <div class="form-container">
      <h3 class="form-title">View Modules by Course</h3>

      <!-- Dropdown for selecting a course -->
      <!-- <div class="form-group">
          <label for="course-select">Select a Course:</label>
          <select id="course-select" [(ngModel)]="selectedCourse" (change)="selectedCourse && onCourseSelect(selectedCourse)">
            <option *ngFor="let course of courses" [ngValue]="course">{{ course.moduleName }}</option>
          </select>
        </div> -->

      <!-- Displaying units -->
      <div *ngIf="units && units.length > 0; else noUnits" class="course-content">
        <div *ngFor="let unit of units" class="module-container" [attr.data-unit-id]="unit.unitId">
          <p class="module-header" [ngClass]="{ collapsed: !unit.isExpanded }" (click)="toggleUnit(unit)">
            {{ unit.unitName }}
          </p>
          <ul *ngIf="unit.isExpanded" class="unit-content">
            <li class="topic">
              <p>{{ unit.content }}</p>
            </li>
          </ul>
        </div>
      </div>

      <!-- <div *ngFor="let unit of units; let i = index" class="module-container"> -->
      <!-- <div *ngIf="units.length > 0; else noUnits" class="course-content">
        <div *ngFor="let unit of units" class="module-container">
          <p class="module-header" [ngClass]="{ collapsed: !unit.isExpanded }" (click)="toggleUnit(unit)">
            {{ unit.unitName }}
          </p>
          <ul *ngIf="unit.isExpanded" class="unit-content">
            <li class="topic">
              <p>{{ unit.content }}</p>
            </li>
          </ul>
        </div>
      </div> -->

      <ng-template #noUnits>
        <p>No units available for this course.</p>
      </ng-template>
    </div>
  </div>


  <button class="download-button" (click)="downloadPDF()" [disabled]="!units || units.length === 0">
    ‚¨áÔ∏è Download PDF
  </button>
  <!-- Re-Generate Content Button -->
<button class="re-generate-button" (click)="toggleRegeneratePopup()">
  üîÑ Re-Generate Content
</button>

<!-- Modal Popup -->
<div class="modal" *ngIf="showModifyFields">
  <div class="modal-content">
    <h2>Why do you want to re-generate the content?</h2>
    <form (ngSubmit)="submitReason()">
      <div>
        <label for="reason">Reason:</label>
        <textarea
          id="reason"
          [(ngModel)]="regenerationReason"
          name="reason"
          rows="4"
          cols="50"
          required
        ></textarea>
      </div>
      <div class="modal-actions">
        <button type="submit" class="submit-button">Submit</button>
        <button type="button" class="cancel-button" (click)="closePopup()">Cancel</button>
      </div>
    </form>
  </div>
</div>


  <!-- Floating button to regenerate content -->
  <!-- <button *ngIf="showFloatingButton" class="floating-button" (click)="regenerateSelection()">üîÑ</button> -->

  <div class="floating-button" *ngIf="showFloatingButton" [style.top]="buttonPosition.top"
    [style.left]="buttonPosition.left">
    <button class="regenerate-button" (click)="regenerateSelection()">
      <i class="fas fa-sync-alt"></i>
      Regenerate
    </button>
  </div>

  <div class="modal-overlay" *ngIf="isModalVisible">
    <div class="modal-content">
      <h3 class="modal-title">Review Generated Text</h3>

      <div class="text-section">
        <div class="text-label">Original Text:</div>
        <div class="text-content">
          {{ highlightedText }}
        </div>
      </div>

      <div class="text-section">
        <div class="text-label">Regenerated Text:</div>
        <div class="text-content">
          {{ regeneratedText }}
        </div>
      </div>

      <div class="modal-actions">
        <button class="cancel-button" (click)="isModalVisible = false">Cancel</button>
        <button class="confirm-button" (click)="confirmUpdate()">Confirm Update</button>
      </div>
    </div>
  </div>

</div>


<!-- </div> -->